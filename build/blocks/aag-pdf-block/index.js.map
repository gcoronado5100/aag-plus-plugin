{"version":3,"file":"blocks/aag-pdf-block/index.js","mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBsD;AACjB;AACsC;AAO5C;AACe;AACF;AACX;AACb;AACqC;AAEzDA,oEAAiB,CAACW,6CAAU,EAAE;EAC5BG,IAAI,EAAEH,6CAAU;EAChBI,IAAIA,CAAC;IAAEC,UAAU;IAAEC;EAAc,CAAC,EAAE;IAClC,MAAMC,UAAU,GAAGf,sEAAa,CAAC;MAC/BgB,SAAS,EAAE;IACb,CAAC,CAAC;IACF,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGZ,4DAAQ,CAAC,IAAI,CAAC;IACpC,MAAM;MACJa,KAAK;MACLC,MAAM;MACNC,IAAI;MACJC,OAAO;MACPC,cAAc;MACdC,UAAU;MACVC;IACF,CAAC,GAAGZ,UAAU;IAEd,MAAMa,WAAW,GAAIC,KAAK,IAAK;MAC7B,IAAIC,MAAM,GAAG,IAAI;MACjB,MAAMC,QAAQ,GAAGF,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MACtCC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;;MAErB;;MAEAtB,2DAAQ,CAAC;QACP2B,IAAI,EAAE,aAAa;QACnBC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,qBAAqB,EACnB,uBAAuB,GAAGT,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACrB;QACpD,CAAC;QACD2B,IAAI,EAAER;MACR,CAAC,CAAC,CACCS,IAAI,CAAEC,QAAQ,IAAK;QAClBX,MAAM,GAAGW,QAAQ,CAACC,UAAU;QAC5B1B,aAAa,CAAC;UACZM,MAAM,EAAEQ,MAAM;UACdN,OAAO,EAAEK,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACrB,IAAI;UACnCa,cAAc,EAAEI,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACU,WAAW;UACjDpB,IAAI,EAAEM,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACrB;QAC9B,CAAC,CAAC;MACJ,CAAC,CAAC,CACDgC,KAAK,CAAEC,KAAK,IAAK;QAChBX,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEU,KAAK,CAAC;MAC7B,CAAC,CAAC;IACN,CAAC;IACD,OACEC,oDAAA,CAAAC,2CAAA,QACED,oDAAA,CAAC7C,sEAAiB,QAChB6C,oDAAA,CAAC3C,4DAAS;MAACkB,KAAK,EAAErB,mDAAE,CAAC,cAAc,CAAE;MAACgD,WAAW,EAAE;IAAK,GACtDF,oDAAA,CAACxC,8DAAW;MACV2C,KAAK,EAAEjD,mDAAE,CAAC,OAAO,CAAE;MACnBkD,KAAK,EAAE7B,KAAM;MACb8B,QAAQ,EAAG9B,KAAK,IAAKL,aAAa,CAAC;QAAEK;MAAM,CAAC;IAAE,CAC/C,CAAC,EAEFyB,oDAAA,CAACzC,iEAAc;MAAC+C,MAAM,EAAC,iBAAiB;MAACD,QAAQ,EAAEvB;IAAY,GAC5DJ,OAAO,KAAK,EAAE,GAAGxB,mDAAE,CAAC,YAAY,CAAC,GAAGA,mDAAE,CAAC,aAAa,CACvC,CAAC,EAEjB8C,oDAAA,CAACxC,8DAAW;MACV2C,KAAK,EAAEjD,mDAAE,CAAC,SAAS,CAAE;MACrBkD,KAAK,EAAE5B,MAAO;MACd6B,QAAQ,EAAG7B,MAAM,IAAKN,aAAa,CAAC;QAAEM;MAAO,CAAC;IAAE,CACjD,CAAC,EAEFwB,oDAAA,CAACvC,gEAAa;MACZ0C,KAAK,EAAEjD,mDAAE,CAAC,iBAAiB,CAAE;MAC7BqD,OAAO,EAAE1B,QAAS;MAClBwB,QAAQ,EAAGxB,QAAQ,IAAKX,aAAa,CAAC;QAAEW;MAAS,CAAC;IAAE,CACrD,CACQ,CACM,CAAC,EACpBmB,oDAAA;MAAA,GAAS7B;IAAU,GACjB6B,oDAAA;MAAKQ,GAAG,EAAE3C,sDAAgB;MAAC4C,GAAG,EAAC;IAAkB,CAAE,CAAC,EACpDT,oDAAA,aAAKzB,KAAU,CAAC,EACfM,QAAQ,GACPmB,oDAAA;MAAGU,IAAI,EAAElC,MAAO;MAACU,MAAM,EAAC,QAAQ;MAACyB,GAAG,EAAC;IAAqB,GACxDX,oDAAA,iBAASpB,UAAmB,CAC3B,CAAC,GAEJoB,oDAAA;MAAGU,IAAI,EAAElC,MAAO;MAACoC,QAAQ,EAAEnC;IAAK,GAC9BuB,oDAAA,iBAASpB,UAAmB,CAC3B,CAEF,CACL,CAAC;EAEP,CAAC;EACDiC,IAAIA,CAAC;IAAE5C;EAAW,CAAC,EAAE;IACnB,MAAME,UAAU,GAAGf,kEAAa,CAACyD,IAAI,CAAC;MACpCzC,SAAS,EAAE;IACb,CAAC,CAAC;IACF,MAAM;MAAEG,KAAK;MAAEC,MAAM;MAAEC,IAAI;MAAEG,UAAU;MAAEC;IAAS,CAAC,GAAGZ,UAAU;IAChE,OACE+B,oDAAA;MAAA,GAAS7B;IAAU,GACjB6B,oDAAA;MAAKQ,GAAG,EAAE3C,sDAAgB;MAAC4C,GAAG,EAAC;IAAkB,CAAE,CAAC,EACpDT,oDAAA,aAAKzB,KAAU,CAAC,EACfM,QAAQ,GACPmB,oDAAA;MAAGU,IAAI,EAAElC,MAAO;MAACU,MAAM,EAAC,QAAQ;MAACyB,GAAG,EAAC;IAAqB,GACxDX,oDAAA,iBAASpB,UAAmB,CAC3B,CAAC,GAEJoB,oDAAA;MAAGU,IAAI,EAAElC,MAAO;MAACoC,QAAQ,EAAEnC;IAAK,GAC9BuB,oDAAA,iBAASpB,UAAmB,CAC3B,CAEF,CAAC;EAEV;AACF,CAAC,CAAC,C","sources":["webpack://aag-plus/./src/blocks/aag-pdf-block/main.css?9a87","webpack://aag-plus/external window \"React\"","webpack://aag-plus/external window [\"wp\",\"apiFetch\"]","webpack://aag-plus/external window [\"wp\",\"blockEditor\"]","webpack://aag-plus/external window [\"wp\",\"blocks\"]","webpack://aag-plus/external window [\"wp\",\"components\"]","webpack://aag-plus/external window [\"wp\",\"element\"]","webpack://aag-plus/external window [\"wp\",\"i18n\"]","webpack://aag-plus/webpack/bootstrap","webpack://aag-plus/webpack/runtime/compat get default export","webpack://aag-plus/webpack/runtime/define property getters","webpack://aag-plus/webpack/runtime/global","webpack://aag-plus/webpack/runtime/hasOwnProperty shorthand","webpack://aag-plus/webpack/runtime/make namespace object","webpack://aag-plus/webpack/runtime/publicPath","webpack://aag-plus/./src/blocks/aag-pdf-block/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","import { registerBlockType } from \"@wordpress/blocks\";\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport { InspectorControls, useBlockProps } from \"@wordpress/block-editor\";\r\nimport {\r\n  PanelBody,\r\n  Button,\r\n  FormFileUpload,\r\n  TextControl,\r\n  ToggleControl,\r\n} from \"@wordpress/components\";\r\nimport { useState } from \"@wordpress/element\";\r\nimport apiFetch from \"@wordpress/api-fetch\";\r\nimport block from \"./block.json\";\r\nimport \"./main.css\";\r\nimport CertificateIcon from \"./img/Certificate-Icon.png\";\r\n\r\nregisterBlockType(block.name, {\r\n  icon: block.icon,\r\n  edit({ attributes, setAttributes }) {\r\n    const blockProps = useBlockProps({\r\n      className: \"certificate__block\",\r\n    });\r\n    const [url, setUrl] = useState(null);\r\n    const {\r\n      title,\r\n      pdfUrl,\r\n      slug,\r\n      pdfName,\r\n      pdfDescription,\r\n      actionText,\r\n      onNewTab,\r\n    } = attributes;\r\n\r\n    const onSelectPDF = (media) => {\r\n      let newUrl = null;\r\n      const fileData = media.target.files[0];\r\n      console.log(fileData);\r\n\r\n      //   console.log(media.target.files[0]);\r\n\r\n      apiFetch({\r\n        path: \"wp/v2/media\",\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Disposition\":\r\n            \"attachment; filename=\" + media.target.files[0].name,\r\n        },\r\n        body: fileData,\r\n      })\r\n        .then((response) => {\r\n          newUrl = response.source_url;\r\n          setAttributes({\r\n            pdfUrl: newUrl,\r\n            pdfName: media.target.files[0].name,\r\n            pdfDescription: media.target.files[0].description,\r\n            slug: media.target.files[0].name,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"error\", error);\r\n        });\r\n    };\r\n    return (\r\n      <>\r\n        <InspectorControls>\r\n          <PanelBody title={__(\"PDF Settings\")} initialOpen={true}>\r\n            <TextControl\r\n              label={__(\"Title\")}\r\n              value={title}\r\n              onChange={(title) => setAttributes({ title })}\r\n            />\r\n\r\n            <FormFileUpload accept='application/pdf' onChange={onSelectPDF}>\r\n              {pdfName === \"\" ? __(\"Upload PDF\") : __(\"Replace PDF\")}\r\n            </FormFileUpload>\r\n\r\n            <TextControl\r\n              label={__(\"PDF URL\")}\r\n              value={pdfUrl}\r\n              onChange={(pdfUrl) => setAttributes({ pdfUrl })}\r\n            />\r\n\r\n            <ToggleControl\r\n              label={__(\"Open in new tab\")}\r\n              checked={onNewTab}\r\n              onChange={(onNewTab) => setAttributes({ onNewTab })}\r\n            />\r\n          </PanelBody>\r\n        </InspectorControls>\r\n        <div {...blockProps}>\r\n          <img src={CertificateIcon} alt='Certificate Icon' />\r\n          <h3>{title}</h3>\r\n          {onNewTab ? (\r\n            <a href={pdfUrl} target='_blank' rel='noreferrer noopener'>\r\n              <button>{actionText}</button>\r\n            </a>\r\n          ) : (\r\n            <a href={pdfUrl} download={slug}>\r\n              <button>{actionText}</button>\r\n            </a>\r\n          )}\r\n        </div>\r\n      </>\r\n    );\r\n  },\r\n  save({ attributes }) {\r\n    const blockProps = useBlockProps.save({\r\n      className: \"certificate__block\",\r\n    });\r\n    const { title, pdfUrl, slug, actionText, onNewTab } = attributes;\r\n    return (\r\n      <div {...blockProps}>\r\n        <img src={CertificateIcon} alt='Certificate Icon' />\r\n        <h3>{title}</h3>\r\n        {onNewTab ? (\r\n          <a href={pdfUrl} target='_blank' rel='noreferrer noopener'>\r\n            <button>{actionText}</button>\r\n          </a>\r\n        ) : (\r\n          <a href={pdfUrl} download={slug}>\r\n            <button>{actionText}</button>\r\n          </a>\r\n        )}\r\n      </div>\r\n    );\r\n  },\r\n});\r\n"],"names":["registerBlockType","__","InspectorControls","useBlockProps","PanelBody","Button","FormFileUpload","TextControl","ToggleControl","useState","apiFetch","block","CertificateIcon","name","icon","edit","attributes","setAttributes","blockProps","className","url","setUrl","title","pdfUrl","slug","pdfName","pdfDescription","actionText","onNewTab","onSelectPDF","media","newUrl","fileData","target","files","console","log","path","method","headers","body","then","response","source_url","description","catch","error","createElement","Fragment","initialOpen","label","value","onChange","accept","checked","src","alt","href","rel","download","save"],"sourceRoot":""}